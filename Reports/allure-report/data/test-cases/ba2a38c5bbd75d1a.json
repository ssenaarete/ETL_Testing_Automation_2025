{"uid":"ba2a38c5bbd75d1a","name":"test_data_precision_validation","fullName":"tests.test_smoke_suite#test_data_precision_validation","historyId":"9561f0a6c8b96857d089cc193809ad34","time":{"start":1759134098004,"stop":1759134098146,"duration":142},"status":"failed","statusMessage":"AssertionError: ❌ Precision length exceeds 32: [{'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'doctor_id', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 50 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'first_name', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'last_name', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'specialty', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'phone_number', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 50 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'email', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'patient_id', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 50 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'first_name', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'last_name', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'address', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 255 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'phone_number', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 50 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'email', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'primary_doctor_id', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 50 > 32'}]","statusTrace":"config_loader = <utils.config_loader.ConfigLoader object at 0x000002C6FCF902F0>\n\n    @pytest.mark.skipif(not should_run(\"Data_Precision_validation\"), reason=\"Marked N in Excel\")\n    def test_data_precision_validation(config_loader):\n        validator = DataPrecisionValidation(config_loader)\n>       validator.run()\n\ntests\\test_smoke_suite.py:165: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <src.data_precision_validation.DataPrecisionValidation object at 0x000002C6FCA18980>\n\n    def run(self):\n        df = self.df.copy()\n        results = []\n    \n        for _, row in df.iterrows():\n            table = row[\"table_name\"]\n            column = row[\"column_name\"]\n            expected_dtype = str(row[\"Data_Type\"]).strip().upper()\n    \n            db_meta = self.get_db_metadata(table)\n            db_cols = [col[\"COLUMN_NAME\"] for col in db_meta]\n    \n            if column not in db_cols:\n                results.append({\n                    \"Table_Excel\": table,\n                    \"Column_Excel\": column,\n                    \"DataType_Excel\": expected_dtype,\n                    \"DataType_DB\": \"N/A\",\n                    \"Status\": \"Mismatch (Column Missing in DB)\"\n                })\n                continue\n    \n            db_col = next(c for c in db_meta if c[\"COLUMN_NAME\"] == column)\n            db_dtype = db_col[\"DATA_TYPE\"].upper()\n            db_precision = db_col.get(\"PRECISION\")\n            db_maxlen = db_col.get(\"MAX_LENGTH\")\n    \n            precision_issue = None\n            if db_dtype in (\"DECIMAL\", \"NUMERIC\") and db_precision and db_precision > 32:\n                precision_issue = f\"❌ Mismatch - Numeric precision too high: {db_precision} > 32\"\n    \n            if db_dtype in (\"CHAR\", \"NCHAR\", \"VARCHAR\", \"NVARCHAR\") and db_maxlen and db_maxlen > 32:\n                precision_issue = f\"❌ Mismatch - String length too high: {db_maxlen} > 32\"\n    \n            if precision_issue:\n                results.append({\n                    \"Database\": self.db.database,\n                    \"Table_Excel\": table,\n                    \"Column_Excel\": column,\n                    \"DataType_Excel\": expected_dtype,\n                    \"DataType_DB\": db_dtype,\n                    \"Status\": precision_issue\n                })\n    \n        # Save + print\n        self.report_helper.save_report(results, test_type=\"DataType_Precision_Validation\")\n    \n        # ✅ Assertions\n        assert results, \"❌ Validation returned no results — check Excel sheet or DB connection.\"\n    \n        missing_columns = [r for r in results if \"Missing\" in r.get(\"Status\", \"\")]\n        assert not missing_columns, f\"❌ Columns missing in DB: {missing_columns}\"\n    \n        precision_issues = [r for r in results if \"too high\" in r.get(\"Status\", \"\")]\n>       assert not precision_issues, f\"❌ Precision length exceeds 32: {precision_issues}\"\n               ^^^^^^^^^^^^^^^^^^^^\nE       AssertionError: ❌ Precision length exceeds 32: [{'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'doctor_id', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 50 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'first_name', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'last_name', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'specialty', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'phone_number', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 50 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'email', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'patient_id', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 50 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'first_name', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'last_name', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'address', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 255 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'phone_number', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 50 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'email', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'primary_doctor_id', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 50 > 32'}]\n\nsrc\\data_precision_validation.py:98: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"config_loader","time":{"start":1759134095482,"stop":1759134095523,"duration":41},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: ❌ Precision length exceeds 32: [{'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'doctor_id', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 50 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'first_name', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'last_name', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'specialty', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'phone_number', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 50 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'email', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'patient_id', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 50 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'first_name', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'last_name', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'address', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 255 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'phone_number', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 50 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'email', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'primary_doctor_id', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 50 > 32'}]","statusTrace":"config_loader = <utils.config_loader.ConfigLoader object at 0x000002C6FCF902F0>\n\n    @pytest.mark.skipif(not should_run(\"Data_Precision_validation\"), reason=\"Marked N in Excel\")\n    def test_data_precision_validation(config_loader):\n        validator = DataPrecisionValidation(config_loader)\n>       validator.run()\n\ntests\\test_smoke_suite.py:165: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <src.data_precision_validation.DataPrecisionValidation object at 0x000002C6FCA18980>\n\n    def run(self):\n        df = self.df.copy()\n        results = []\n    \n        for _, row in df.iterrows():\n            table = row[\"table_name\"]\n            column = row[\"column_name\"]\n            expected_dtype = str(row[\"Data_Type\"]).strip().upper()\n    \n            db_meta = self.get_db_metadata(table)\n            db_cols = [col[\"COLUMN_NAME\"] for col in db_meta]\n    \n            if column not in db_cols:\n                results.append({\n                    \"Table_Excel\": table,\n                    \"Column_Excel\": column,\n                    \"DataType_Excel\": expected_dtype,\n                    \"DataType_DB\": \"N/A\",\n                    \"Status\": \"Mismatch (Column Missing in DB)\"\n                })\n                continue\n    \n            db_col = next(c for c in db_meta if c[\"COLUMN_NAME\"] == column)\n            db_dtype = db_col[\"DATA_TYPE\"].upper()\n            db_precision = db_col.get(\"PRECISION\")\n            db_maxlen = db_col.get(\"MAX_LENGTH\")\n    \n            precision_issue = None\n            if db_dtype in (\"DECIMAL\", \"NUMERIC\") and db_precision and db_precision > 32:\n                precision_issue = f\"❌ Mismatch - Numeric precision too high: {db_precision} > 32\"\n    \n            if db_dtype in (\"CHAR\", \"NCHAR\", \"VARCHAR\", \"NVARCHAR\") and db_maxlen and db_maxlen > 32:\n                precision_issue = f\"❌ Mismatch - String length too high: {db_maxlen} > 32\"\n    \n            if precision_issue:\n                results.append({\n                    \"Database\": self.db.database,\n                    \"Table_Excel\": table,\n                    \"Column_Excel\": column,\n                    \"DataType_Excel\": expected_dtype,\n                    \"DataType_DB\": db_dtype,\n                    \"Status\": precision_issue\n                })\n    \n        # Save + print\n        self.report_helper.save_report(results, test_type=\"DataType_Precision_Validation\")\n    \n        # ✅ Assertions\n        assert results, \"❌ Validation returned no results — check Excel sheet or DB connection.\"\n    \n        missing_columns = [r for r in results if \"Missing\" in r.get(\"Status\", \"\")]\n        assert not missing_columns, f\"❌ Columns missing in DB: {missing_columns}\"\n    \n        precision_issues = [r for r in results if \"too high\" in r.get(\"Status\", \"\")]\n>       assert not precision_issues, f\"❌ Precision length exceeds 32: {precision_issues}\"\n               ^^^^^^^^^^^^^^^^^^^^\nE       AssertionError: ❌ Precision length exceeds 32: [{'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'doctor_id', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 50 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'first_name', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'last_name', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'specialty', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'phone_number', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 50 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_doctors', 'Column_Excel': 'email', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'patient_id', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 50 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'first_name', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'last_name', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'address', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 255 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'phone_number', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 50 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'email', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 100 > 32'}, {'Database': 'SOURCE_DB', 'Table_Excel': 'source_patients', 'Column_Excel': 'primary_doctor_id', 'DataType_Excel': 'VARCHAR', 'DataType_DB': 'VARCHAR', 'Status': '❌ Mismatch - String length too high: 50 > 32'}]\n\nsrc\\data_precision_validation.py:98: AssertionError","steps":[],"attachments":[{"uid":"da8882ed1a2b27b","name":"stdout","source":"da8882ed1a2b27b.txt","type":"text/plain","size":104}],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"stepsCount":0,"attachmentStep":false},"afterStages":[],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_smoke_suite"},{"name":"host","value":"INATS-LTP-066"},{"name":"thread","value":"33180-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_smoke_suite"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"ba2a38c5bbd75d1a.json","parameterValues":[]}